<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Word Viewer</title>
<style>
    body {
        background-color: black;
        color: white;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    #dropdown {
        position: absolute;
        top: 10px;
        width: 100%;
        display: flex;
        justify-content: center;
    }
    #container {
        text-align: center;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 100%;
    }
    #wordDisplay span {
        color: white;
        font-size: 4em; /* Even larger text */
        font-weight: bold;
        display: block;
    }
    #meaningDisplay {
        color: lightblue;
        margin-top: 1em;
    }
    #sentenceDisplay {
        color: lightgrey;
        margin-top: 1em; /* Space from the meaning */
    }
    #sentenceDisplay span {
        display: block; /* New line for sentence */
    }
    select, button {
        margin: 10px;
        padding: 15px 25px; /* Larger buttons */
        font-size: 1em;
        cursor: pointer;
    }
    #navigation {
        display: flex;
        justify-content: space-around; /* Space out buttons */
        width: 100%;
        max-width: 600px; /* Adjust as needed */
    }
    #backButton {
        visibility: hidden; /* Start as hidden */
    }
</style>
</head>
<body>

<div id="dropdown">
    <select id="fileSelect" onchange="loadWordList()"></select>
</div>
<div id="container">
    <div id="wordDisplay"></div>
    <div id="meaningDisplay"></div>
    <div id="sentenceDisplay"></div>
    <div id="navigation">
        <button id="backButton" onclick="displayPreviousWord()">Back</button>
        <button id="nextButton" onclick="displayNextWord()">Next</button>
    </div>
</div>

<script>
let wordList = [];
let currentIndex = -1;

function displayWord() {
    if (currentIndex >= 0 && currentIndex < wordList.length) {
        const parts = wordList[currentIndex].split('~');
        if (parts.length === 3) {
            document.getElementById('wordDisplay').innerHTML = `<span>${parts[0]}</span>`;
            document.getElementById('meaningDisplay').textContent = parts[1];
            document.getElementById('sentenceDisplay').innerHTML = `<span>${parts[2]}</span>`;
        } else {
            alert('The word entry is not formatted correctly.');
        }
    } else {
        document.getElementById('wordDisplay').textContent = '';
        document.getElementById('meaningDisplay').textContent = '';
        document.getElementById('sentenceDisplay').textContent = '';
    }
    document.getElementById('backButton').style.visibility = currentIndex <= 0 ? 'hidden' : 'visible';
}

function displayNextWord() {
    currentIndex = Math.min(currentIndex + 1, wordList.length - 1);
    displayWord();
}

function displayPreviousWord() {
    currentIndex = Math.max(currentIndex - 1, 0);
    displayWord();
}

function loadWordList() {
    const fileSelect = document.getElementById('fileSelect');
    const selectedFile = fileSelect.options[fileSelect.selectedIndex].text;
    const filePath = `https://raw.githubusercontent.com/lwkwok/lwkwok.github.io/main/App_SpellingTest/${encodeURIComponent(selectedFile)}.txt`;

    fetch(filePath)
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.text();
        })
        .then(text => {
            wordList = text.split(/\r?\n/);
            currentIndex = 0;
            displayWord();
        })
        .catch(error => {
            alert('Error fetching the word list: ' + error.message);
        });
}

function populateFileSelect() {
    fetch('https://raw.githubusercontent.com/lwkwok/lwkwok.github.io/main/App_SpellingTest/_index.txt')
        .then(response => response.text())
        .then(text => {
            const fileNames = text.split(/\r?\n/).filter(name => name.trim() !== '');
            const selectElement = document.getElementById('fileSelect');
            selectElement.innerHTML = ''; // Clear existing options
            fileNames.forEach(fileName => {
                const option = document.createElement('option');
                option.value = fileName;
                option.text = fileName.replace(/\.txt$/, '').replace(/%20/g, ' ');
                selectElement.appendChild(option);
            });
        })
        .catch(error => {
            alert('Error populating the file select: ' + error.message);
        });
}

// Populate the dropdown when the page loads
window.addEventListener('load', populateFileSelect);
</script>

</body>
</html>
